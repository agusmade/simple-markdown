!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).SimpleMarkdown=n()}(this,function(){"use strict";function r(t){return t.replace(E,"\n").replace(A,"").replace(R,"    ")}function c(t,n){var e=t||{};if(null!=n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}function t(m,e){var y,g=Object.keys(m).filter(function(t){var n=m[t];if(null==n||null==n.match)return!1;var e=n.order;return"number"==typeof e&&isFinite(e)||"undefined"==typeof console||console.warn("simple-markdown: Invalid order for rule `"+t+"`: "+String(e)),!0});g.sort(function(t,n){var e=m[t],r=m[n],u=e.order,a=r.order;if(u!==a)return u-a;var l=e.quality?0:1,o=r.quality?0:1;return l!=o?l-o:t<n?-1:n<t?1:0});var v=function(t,n){var e=[];for(y=(n=n||y).rslt=e;t;){var r=null,u=null,a=null,l=NaN,o=0,c=g[0],i=m[c];do{var f=i.order,p=null==n.prevCapture?"":n.prevCapture[0],s=i.match(t,n,p);if(s){var d=i.quality?i.quality(s,n,p):0;d<=l||(r=c,u=i,a=s,l=d)}c=g[++o],i=m[c]}while(i&&(!a||i.order===f&&i.quality));if(null==u||null==a)throw new Error("Could not find a matching rule for the below content. The rule with highest `order` should always match content provided to it. Check the definition of `match` for '"+g[g.length-1]+"'. It seems to not match the following source:\n"+t);if(a.index)throw new Error("`match` must return a capture starting at index 0 (the current parse index). Did you forget a ^ at the start of the RegExp?");var h=u.parse(a,v,n);"attr"===r?n.prevResult[n.prevResult.length-1].attr=h:Array.isArray(h)?Array.prototype.push.apply(e,h):(null==h.type&&(h.type=r),e.push(h)),n.prevCapture=a,n.prevResult=e,t=t.substring(n.prevCapture[0].length)}return e};return function(t,n){return(y=c(n,e)).inline||y.disableAutoBlockNewlines||(t+="\n\n"),y.prevCapture=null,y.prevResult=null,v(r(t),y)}}function n(e){function t(t,n){return n.inline?e.exec(t):null}return t.regex=e,t}function e(e){function t(t,n){return n.inline?null:e.exec(t)}return t.regex=e,t}function u(e){function t(t,n){return e.exec(t)}return t.regex=e,t}function l(t,n,e){return{$$typeof:O,type:t,key:null==n?void 0:n,ref:null,props:e,_owner:null}}function i(t,n,e,r){e=e||{},r=void 0===r||r;var u="";for(var a in e){var l=e[a];Object.prototype.hasOwnProperty.call(e,a)&&l&&(u+=" "+h(a)+'="'+h(l)+'"')}var o="<"+t+u+">";return r?o+n+"</"+t+">":o}function a(t){if(null==t)return null;try{var n=decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"").toLowerCase();if(0===n.indexOf("javascript:")||0===n.indexOf("vbscript:")||0===n.indexOf("data:"))return null}catch(t){return null}return t}function o(t){return t.replace(C,"$1")}function f(t,n,e){var r=e.inline||!1;e.inline=!0;var u=t(n,e);return e.inline=r,u}function p(t,n,e){var r=e.inline||!1;e.inline=!1;var u=t(n+"\n\n",e);return e.inline=r,u}function s(t,n,e){return{content:f(n,t[1],e)}}function d(){return{}}function h(t){return String(t).replace(T,function(t){return j[t]})}var m,y,g,v,w,k={"\\#(\\w+)":function(t,n,e){e.id=t[n+1]},"\\.([\\w-]+)":function(t,n,e){e.class=e.class||[],e.class.push(t[n+1])},'([\\w-]+)s*=s*\\"([\\s\\S]+?)\\"':function(t,n,e){e[t[n+1]]=t[n+2]},"([\\w-]+)=([\\S]+)":function(t,n,e){e[t[n+1]]=t[n+2]},"[\\w-]+":function(t,n,e){e[t[n]]=!0}},x=Object.keys(k),b=0,_=x.map(function(t){var n=++b;return b+=new RegExp(t+"|").exec("").length-1,n}),S=new RegExp(x.map(function(t){return"("+t+")"}).join("|"),"g"),E=/\r\n?/g,R=/\t/g,A=/\f/g,O="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,$={},T=/[<>&"']/g,j={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#96;"},C=/\\([^0-9A-Za-z\s])/g,P="(?:[*+-]|\\d+\\.)",q="( *)("+P+") +",F=new RegExp("^"+q),N=new RegExp(q+"[^\\n]*(?:\\n(?!\\1"+P+" )[^\\n]*)*(\n|$)","gm"),B=/\n{2,}$/,I=/^ (?= *`)|(` *) $/g,L=B,z=/ *\n+$/,G=new RegExp("^( *)("+P+") [\\s\\S]+?(?:\n{2,}(?! )(?!\\1"+P+" )\\n*|\\s*\n*$)"),X=/(?:^|\n)( *)$/,Z=(m=/^ *\| *| *\| *$/g,y=/ *$/,g=/^ *-+: *$/,v=/^ *:-+: *$/,w=/^ *:-+ *$/,{parseTable:M(!0),parseNpTable:M(!1),TABLE_REGEX:/^ *(\|.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/,NPTABLE_REGEX:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/});function U(t){return g.test(t)?"right":v.test(t)?"center":w.test(t)?"left":null}function H(t,n,e,r){var u=e.inTable;e.inTable=!0;var a=n(t.trim(),e);e.inTable=u;var l=[[]];return a.forEach(function(t,n){"tableSeparator"===t.type?r&&(0===n||n===a.length-1)||l.push([]):("text"!==t.type||null!=a[n+1]&&"tableSeparator"!==a[n+1].type||(t.content=t.content.replace(y,"")),l[l.length-1].push(t))}),l}function M(p){return function(t,n,e){e.inline=!0;var r,u,a,l,o,c=H(t[1],n,e,p),i=(o=t[2],p&&(o=o.replace(m,"")),o.trim().split("|").map(U)),f=(r=t[3],u=n,a=e,l=p,r.trim().split("\n").map(function(t){return H(t,u,a,l)}));return e.inline=!1,{type:"table",header:c,align:i,cells:f}}}function D(t,n,e){var r=(t[2]||t[1]).replace(/\s+/g," ").toLowerCase();if(n._defs&&n._defs[r]){var u=n._defs[r];e.target=u.target,e.title=u.title}return n._refs=n._refs||{},n._refs[r]=n._refs[r]||[],n._refs[r].push(e),e}function Q(e,r,u){if(!r)throw new Error("simple-markdown: outputFor: `property` must be defined. if you just upgraded, you probably need to replace `outputFor` with `reactFor`");var a,t=(e.Array||et.Array)[r];if(!t)throw new Error("simple-markdown: outputFor: to join nodes of type `"+r+"` you must provide an `Array:` joiner rule with that type, Please see the docs for details on specifying an Array rule.");var l=t,o=function(t,n){return a=n=n||a,Array.isArray(t)?l(t,o,n):e[t.type][r](t,o,n)};return function(t,n){return a=c(n,u),o(t,a)}}function J(t,n){return(n=n||{}).inline=!1,rt(t,n)}function K(t,n){var e=B.test(t);return(n=n||{}).inline=!e,rt(t,n)}function V(t,n){return ut(J(t,n),n)}var W="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",Y="\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*",tt=/mailto:/i,nt=0,et={Array:{react:function(t,n,e){for(var r=e.key,u=[],a=0;a<t.length;a++){e.key=""+a;var l=t[a];if("text"===l.type)for(l={type:"text",content:l.content};a+1<t.length&&"text"===t[a+1].type;a++)l.content+=t[a+1].content;u.push(n(l,e))}return e.key=r,u},html:function(t,n,e){for(var r="",u=0;u<t.length;u++){var a=t[u];if("text"===a.type)for(a={type:"text",content:a.content};u+1<t.length&&"text"===t[u+1].type;u++)a.content+=t[u+1].content;r+=n(a,e)}return r}},heading:{order:nt++,match:e(/^ *(#{1,6})([^\n]+?)#* *(?:\n *)+\n/),parse:function(t,n,e){return{level:t[1].length,content:f(n,t[2].trim(),e)}},react:function(t,n,e){return l("h"+t.level,e.key,{children:n(t.content,e)})},html:function(t,n,e){return i("h"+t.level,n(t.content,e))}},nptable:{order:nt++,match:e(Z.NPTABLE_REGEX),parse:Z.parseNpTable,react:null,html:null},lheading:{order:nt++,match:e(/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/),parse:function(t,n,e){return{type:"heading",level:"="===t[2]?1:2,content:f(n,t[1],e)}},react:null,html:null},hr:{order:nt++,match:e(/^( *[-*_]){3,} *(?:\n *)+\n/),parse:d,react:function(t,n,e){return l("hr",e.key,$)},html:function(t,n,e){return"<hr>"}},codeBlock:{order:nt++,match:e(/^(?:    [^\n]+\n*)+(?:\n *)+\n/),parse:function(t,n,e){return{lang:void 0,content:t[0].replace(/^    /gm,"").replace(/\n+$/,"")}},react:function(t,n,e){var r=t.lang?"markdown-code-"+t.lang:void 0;return l("pre",e.key,{children:l("code",null,{className:r,children:t.content})})},html:function(t,n,e){var r=t.lang?"markdown-code-"+t.lang:void 0,u=i("code",h(t.content),{class:r});return i("pre",u)}},fence:{order:nt++,match:e(/^ *(`{3,}|~{3,}) *(?:(\S+) *)?\n([\s\S]+?)\n?\1 *(?:\n *)+\n/),parse:function(t,n,e){return{type:"codeBlock",lang:t[2]||void 0,content:t[3]}},react:null,html:null},container:{order:nt++,match:e(/^ *(:{3,}) *(?:(\w+) *)?([\s\S]+?)\n([\s\S]+?)\n?\1 *(?:\n *)+/),parse:function(t,n,e){return{containerType:t[2]||"",title:f(n,t[3]||"",e),content:p(n,t[4],e)}},react:function(t,n,e){return l("blockquote",e.key,{children:n(t.content,e)})},html:null},blockQuote:{order:nt++,match:e(/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/),parse:function(t,n,e){return{content:n(t[0].replace(/^ *> ?/gm,""),e)}},react:function(t,n,e){return l("blockquote",e.key,{children:n(t.content,e)})},html:function(t,n,e){return i("blockquote",n(t.content,e))}},list:{order:nt++,match:function(t,n){var e=null==n.prevCapture?"":n.prevCapture[0],r=X.exec(e),u=n._list||!n.inline;return r&&u?(t=r[1]+t,G.exec(t)):null},parse:function(t,s,d){var n=t[2],e=1<n.length,r=e?+n:void 0,h=t[0].replace(L,"\n").match(N),m=!1;return{ordered:e,start:r,items:h.map(function(t,n){var e=F.exec(t),r=e?e[0].length:0,u=new RegExp("^ {1,"+r+"}","gm"),a=t.replace(u,"").replace(F,""),l=n===h.length-1,o=-1!==a.indexOf("\n\n")||l&&m;m=o;var c,i=d.inline,f=d._list;d._list=!0,c=o?(d.inline=!1,a.replace(z,"\n\n")):(d.inline=!0,a.replace(z,""));var p=s(c,d);return d.inline=i,d._list=f,p})}},react:function(t,e,r){return l(t.ordered?"ol":"ul",r.key,{start:t.start,children:t.items.map(function(t,n){return l("li",""+n,{children:e(t,r)})})})},html:function(t,n,e){var r=t.items.map(function(t){return i("li",n(t,e))}).join("");return i(t.ordered?"ol":"ul",r,{start:t.start})}},def:{order:nt++,match:e(/^ *\[([^\]]+)\]: *<?([^\s>]*)>?(?: +["(]([^\n]+)[")])? *\n(?: *\n)*/),parse:function(t,n,e){var r=t[1].replace(/\s+/g," ").toLowerCase(),u=t[2],a=t[3];return e._refs&&e._refs[r]&&e._refs[r].forEach(function(t){t.target=u,t.title=a}),e._defs=e._defs||{},e._defs[r]={target:u,title:a},{def:r,target:u,title:a}},react:function(){return null},html:function(){return""}},table:{order:nt++,match:e(Z.TABLE_REGEX),parse:Z.parseTable,react:function(n,e,r){function u(t){return null==n.align[t]?{}:{textAlign:n.align[t]}}var t=n.header.map(function(t,n){return l("th",""+n,{style:u(n),scope:"col",children:e(t,r)})}),a=n.cells.map(function(t,n){return l("tr",""+n,{children:t.map(function(t,n){return l("td",""+n,{style:u(n),children:e(t,r)})})})});return l("table",r.key,{children:[l("thead","thead",{children:l("tr",null,{children:t})}),l("tbody","tbody",{children:a})]})},html:function(n,e,r){function u(t){return null==n.align[t]?"":"text-align:"+n.align[t]+";"}var t=n.header.map(function(t,n){return i("th",e(t,r),{style:u(n),scope:"col"})}).join(""),a=n.cells.map(function(t){var n=t.map(function(t,n){return i("td",e(t,r),{style:u(n)})}).join("");return i("tr",n)}).join(""),l=i("thead",i("tr",t)),o=i("tbody",a);return i("table",l+o)}},newline:{order:nt++,match:e(/^(?:\n *)*\n/),parse:d,react:function(t,n,e){return"\n"},html:function(t,n,e){return"\n"}},br1:{order:nt++,match:n(/^\\\\/),parse:function(){return{type:"br"}},react:null,html:null},attr:{order:nt++,match:u(/^\s*\{([\s\S]+?)\}/),parse:function(t,n,e){return function(t){if(!t)return{};for(var e={},r=!0;(r=S.exec(t))&&r;)_.forEach(function(t,n){r[t]&&k[x[n]](r,t,e)});return e}(t[1])},react:null,html:null},p:{order:nt++,match:e(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+(?=\{([\s\S]+?)\})/),parse:function(t,n,e){return{type:"paragraph",content:f(n,t[1],e)}},react:function(t,n,e){return l("div",e.key,{className:"paragraph",children:n(t.content,e)})},html:function(t,n,e){return i("div",n(t.content,e),{class:"paragraph"})}},paragraph:{order:nt++,match:e(/^((?:[^\n]|\n(?! *\n))+)(?:\n *)+/),parse:s,react:function(t,n,e){return l("div",e.key,{className:"paragraph",children:n(t.content,e)})},html:function(t,n,e){return i("div",n(t.content,e),{class:"paragraph"})}},escape:{order:nt++,match:n(/^\\([^0-9A-Za-z\s])/),parse:function(t,n,e){return{type:"text",content:t[1]}},react:null,html:null},tableSeparator:{order:nt++,match:function(t,n){return n.inTable?/^ *\| */.exec(t):null},parse:function(){return{type:"tableSeparator"}},react:function(){return" | "},html:function(){return" &vert; "}},autolink:{order:nt++,match:n(/^<([^: >]+:\/[^ >]+)>/),parse:function(t,n,e){return{type:"link",content:[{type:"text",content:t[1]}],target:t[1]}},react:null,html:null},mailto:{order:nt++,match:n(/^<([^ >]+@[^ >]+)>/),parse:function(t,n,e){var r=t[1],u=t[1];return tt.test(u)||(u="mailto:"+u),{type:"link",content:[{type:"text",content:r}],target:u}},react:null,html:null},url:{order:nt++,match:n(/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/),parse:function(t,n,e){return{type:"link",content:[{type:"text",content:t[1]}],target:t[1],title:void 0}},react:null,html:null},link:{order:nt++,match:n(new RegExp("^\\[("+W+")\\]\\("+Y+"\\)")),parse:function(t,n,e){return{content:n(t[1],e),target:o(t[2]),title:t[3]}},react:function(t,n,e){return l("a",e.key,{href:a(t.target),title:t.title,children:n(t.content,e)})},html:function(t,n,e){var r={href:a(t.target),title:t.title};return i("a",n(t.content,e),r)}},image:{order:nt++,match:n(new RegExp("^!\\[("+W+")\\]\\("+Y+"\\)")),parse:function(t,n,e){return{alt:t[1],target:o(t[2]),title:t[3]}},react:function(t,n,e){return l("img",e.key,{src:a(t.target),alt:t.alt,title:t.title})},html:function(t,n,e){return i("img","",{src:a(t.target),alt:t.alt,title:t.title},!1)}},reflink:{order:nt++,match:n(new RegExp("^\\[("+W+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(t,n,e){return D(t,e,{type:"link",content:n(t[1],e)})},react:null,html:null},refimage:{order:nt++,match:n(new RegExp("^!\\[("+W+")\\]\\s*\\[([^\\]]*)\\]")),parse:function(t,n,e){return D(t,e,{type:"image",alt:t[1]})},react:null,html:null},em:{order:nt,match:n(new RegExp("^\\b_((?:__|\\\\[\\s\\S]|[^\\\\_])+?)_\\b|^\\*(?=\\S)((?:\\*\\*|\\\\[\\s\\S]|\\s+(?:\\\\[\\s\\S]|[^\\s\\*\\\\]|\\*\\*)|[^\\s\\*\\\\])+?)\\*(?!\\*)")),quality:function(t){return t[0].length+.2},parse:function(t,n,e){return{content:n(t[2]||t[1],e)}},react:function(t,n,e){return l("em",e.key,{children:n(t.content,e)})},html:function(t,n,e){return i("em",n(t.content,e))}},strong:{order:nt,match:n(/^\*\*((?:\\[\s\S]|[^\\])+?)\*\*(?!\*)/),quality:function(t){return t[0].length+.1},parse:s,react:function(t,n,e){return l("strong",e.key,{children:n(t.content,e)})},html:function(t,n,e){return i("strong",n(t.content,e))}},u:{order:nt++,match:n(/^__((?:\\[\s\S]|[^\\])+?)__(?!_)/),quality:function(t){return t[0].length},parse:s,react:function(t,n,e){return l("u",e.key,{children:n(t.content,e)})},html:function(t,n,e){return i("u",n(t.content,e))}},del:{order:nt++,match:n(/^~~(?=\S)((?:\\[\s\S]|~(?!~)|[^\s~]|\s(?!~~))+?)~~/),parse:s,react:function(t,n,e){return l("del",e.key,{children:n(t.content,e)})},html:function(t,n,e){return i("del",n(t.content,e))}},span:{order:nt++,match:n(/^\[([^\n\]]+)\]/),parse:s,react:null,html:null},inlineCode:{order:nt++,match:n(/^(`+)([\s\S]*?[^`])\1(?!`)/),parse:function(t,n,e){return{content:t[2].replace(I,"$1")}},react:function(t,n,e){return l("code",e.key,{children:t.content})},html:function(t,n,e){return i("code",h(t.content))}},br:{order:nt++,match:u(/^ {2,}\n/),parse:d,react:function(t,n,e){return l("br",e.key,$)},html:function(t,n,e){return"<br>"}},text:{order:nt++,match:u(/^[\s\S]+?(?=[^0-9A-Za-z\s\u00c0-\uffff]|\n\n| {2,}\n|\w+:\S|$)/),parse:function(t,n,e){return{content:t[0]}},react:function(t,n,e){return t.content},html:function(t,n,e){return h(t.content)}}},rt=t(et),ut=Q(et,"react"),at=Q(et,"html");return{defaultRules:et,parserFor:t,outputFor:Q,inlineRegex:n,blockRegex:e,anyScopeRegex:u,parseInline:f,parseBlock:p,markdownToReact:V,markdownToHtml:function(t,n){return at(J(t,n),n)},ReactMarkdown:function(t){var n={};for(var e in t)"source"!==e&&Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.children=V(t.source),l("div",null,n)},defaultBlockParse:J,defaultInlineParse:function(t,n){return(n=n||{}).inline=!0,rt(t,n)},defaultImplicitParse:K,defaultReactOutput:ut,defaultHtmlOutput:at,preprocess:r,sanitizeText:h,sanitizeUrl:a,unescapeUrl:o,htmlTag:i,reactElement:l,defaultRawParse:rt,ruleOutput:function(r,u){return u||"undefined"==typeof console||console.warn("simple-markdown ruleOutput should take 'react' or 'html' as the second argument."),function(t,n,e){return r[t.type][u](t,n,e)}},reactFor:function(o){var c=function(t,n){if(n=n||{},Array.isArray(t)){for(var e=n.key,r=[],u=null,a=0;a<t.length;a++){n.key=""+a;var l=c(t[a],n);"string"==typeof l&&"string"==typeof u?(u+=l,r[r.length-1]=u):(r.push(l),u=l)}return n.key=e,r}return o(t,c,n)};return c},htmlFor:function(e){var r=function(t,n){return n=n||{},Array.isArray(t)?t.map(function(t){return r(t,n)}).join(""):e(t,r,n)};return r},defaultParse:function(){return"undefined"!=typeof console&&console.warn("defaultParse is deprecated, please use `defaultImplicitParse`"),K.apply(null,arguments)},defaultOutput:function(){return"undefined"!=typeof console&&console.warn("defaultOutput is deprecated, please use `defaultReactOutput`"),ut.apply(null,arguments)}}});